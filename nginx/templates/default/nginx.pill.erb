Bluepill.application("nginx") do |app|
  app.process("nginx") do |process|
    process.pid_file           = "/var/run/nginx.pid"
    process.working_dir        = "<%= @working_dir %>"
    process.start_command      = "<%= @src_binary %> -c <%= @nginx_dir %>/nginx.conf"
    process.stop_command       = "<%= @src_binary %> -s stop"
    process.restart_command    = "<%= @src_binary %> -s reload"
    process.daemonize          = true
    process.stdout             = process.stderr = "<%= @log_dir %>/nginx.log"

    process.monitor_children do |child_process|
      child_process.stop_command = "kill -QUIT {{PID}}"
    end
  end
end
