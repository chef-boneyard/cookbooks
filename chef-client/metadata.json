{
  "name": "chef-client",
  "description": "Manages aspects of only chef-client",
  "long_description": "DESCRIPTION\n===========\n\nThis cookbook is used to configure a system as a Chef Client.\n\nREQUIREMENTS\n============\n\nChef 0.9.12 or later is required.\n\nSupported Platforms\n-------------------\n\nThe following platforms are supported by this cookbook, meaning that the recipes run on these platforms without error.\n\n* Debian\n* Ubuntu\n* Red Hat\n* CentOS\n* Fedora\n* ArchLinux\n* FreeBSD\n* Mac OS X\n\nOther Cookbooks\n---------------\n\nOther cookbooks can be used with this cookbook but they are not explicitly required. The default settings in this cookbook do not require their use. The other cookbooks (on cookbooks.opsocde.com) are:\n\n* bluepill\n* daemontools\n* runit\n\nSee __USAGE__ below.\n\nATTRIBUTES\n==========\n\n* `node[\"chef_client\"][\"interval\"]` - Sets `Chef::Config[:interval]` via command-line option for number of seconds between chef-client daemon runs. Default 1800.\n* `node[\"chef_client\"][\"splay\"]` - Sets `Chef::Config[:splay]` via command-line option for a random amount of seconds to add to interval. Default 20.\n* `node[\"chef_client\"][\"log_dir\"]` - Sets directory used in `Chef::Config[:log_location]` via command-line option to a location where chef-client should log output. Default \"/var/log/chef\".\n* `node[\"chef_client\"][\"server_url\"]` - Sets `Chef::Config[:chef_server_url]` in the config file to the Chef Server URI. Default \"http://localhost:4000\". See __USAGE__.\n* `node[\"chef_client\"][\"validation_client_name\"]` - Sets `Chef::Config[:validation_client_name]` in the config file to the name of the validation client. Default \"chef-validator\". See __USAGE__.\n* `node[\"chef_client\"][\"init_style\"]` - Sets up the client service based on the style of init system to use. Default is based on platform and falls back to \"none\". See __USAGE__.\n* `node[\"chef_client\"][\"run_path\"]` - Directory location where chef-client should write the PID file. Default based on platform, falls back to \"/var/run\".\n* `node[\"chef_client\"][\"cache_path\"]` - Directory location for `Chef::Config[:file_cache_path]` where chef-client will cache various files. Default is based on platform, falls back to \"/var/chef/cache\".\n* `node[\"chef_client\"][\"backup_path\"]` - Directory location for `Chef::Config[:file_backup_path]` where chef-client will backup templates and cookbook files. Default is based on platform, falls back to \"/var/chef/backup\".\n\nRECIPES\n=======\n\nThis section describes the recipes in the cookbook and how to use them in your environment.\n\nconfig\n------\n\nSets up the `/etc/chef/client.rb` config file from a template and reloads the configuration for the current chef-client run.\n\nservice\n-------\n\nUse this recipe on systems that should have a `chef-client` daemon running, such as when Knife bootstrap was used to install Chef on a new system.\n\nThis recipe sets up the `chef-client` service depending on the `init_style` attribute (see above). The following init styles are supported:\n\n* init - uses the init script included in the chef gem, supported on debian and redhat family distributions.\n* upstart - uses the upstart job included in the chef gem, supported on ubuntu.\n* arch - uses the init script included in this cookbook for ArchLinux, supported on arch.\n* runit - sets up the service under runit, supported on ubuntu, debian and gentoo.\n* bluepill - sets up the service under bluepill. As bluepill is a pure ruby process monitor, this should work on any platform.\n* daemontools -sets up the service under daemontools, supported on debian, ubuntu and arch\n* bsd - prints a message about how to update BSD systems to enable the chef-client service, supported on Free/OpenBSD and OSX.\n\ndefault\n-------\n\nIncludes the `chef-client::service` recipe by default.\n\n`delete_validation`\n-------------------\n\nUse this recipe to delete the validation certificate (default `/etc/chef/validation.pem`) when using a `chef-client` after the client has been validated and authorized to connect to the server.\n\nBeware if using this on your Chef Server. First copy the validation.pem certificate file to another location, such as your knife configuration directory (`~/.chef`) or [Chef Repository](http://wiki.opscode.com/display/chef/Chef+Repository).\n\nUSAGE\n=====\n\nCreate a `base` role that will represent the base configuration for any system that includes managing aspects of the chef-client. Add recipes to the run list of the role, customize the attributes, and apply the role to nodes. For example, the following role (Ruby DSL) will set the init style to `init`, delete the validation certificate (as the client would already be authenticated) and set up the chef-client as a service using the init style.\n\n    name \"base\"\n    description \"Base role applied to all nodes\"\n    override_attributes(\n      \"chef_client\" => {\n        \"init_style\" => \"init\"\n      }\n    )\n    run_list(\n      \"recipe[chef-client::delete_validation]\",\n      \"recipe[chef-client::config]\",\n      \"recipe[chef-client]\"\n    )\n\nThe `chef-client::config` recipe is only required with init style `init` (default setting for the attribute on debian/redhat family platforms, because the init script doesn't include the `pid_file` option which is set in the config.\n\nThe default Chef Server will be `http://localhost:4000` which is the `Chef::Config[:chef_server_url]` default value. To use the config recipe with the Opscode Platform, for example, add the following to the `override_attributes`\n\n    override_attributes(\n      \"chef_client\" => {\n        \"server_url\" => \"https://api.opscode.com/organizations/ORGNAME\",\n        \"validation_client_name\" => \"ORGNAME-validator\"\n      }\n    )\n\nWhere ORGNAME is your Opscode Platform organization name. Be sure to add these attributes to the role if modifying per the section below.\n\nAlternate Init Styles\n---------------------\n\nThe alternate init styles available are:\n\n* runit\n* bluepill\n* daemontools\n\nFor usage, see below.\n\n# Runit\n\nTo use runit, download the cookbook from the cookbook site.\n\n    knife cookbook site vendor runit -d\n\nChange the `init_style` to runit in the base role and add the runit recipe to the role's run list:\n\n    name \"base\"\n    description \"Base role applied to all nodes\"\n    override_attributes(\n      \"chef_client\" => {\n        \"init_style\" => \"runit\"\n      }\n    )\n    run_list(\n      \"recipe[chef-client::delete_validation]\",\n      \"recipe[runit]\",\n      \"recipe[chef-client]\"\n    )\n\nThe `chef-client` recipe will create the chef-client service configured with runit. The runit run script will be located in `/etc/sv/chef-client/run`. The output log will be in the runit service directory, `/etc/sv/chef-client/log/main/current`.\n\n# Bluepill\n\nTo use bluepill, download the cookbook from the cookbook site.\n\n    knife cookbook site vendor bluepill -d\n\nChange the `init_style` to runit in the base role and add the bluepill recipe to the role's run list:\n\n    name \"base\"\n    description \"Base role applied to all nodes\"\n    override_attributes(\n      \"chef_client\" => {\n        \"init_style\" => \"bluepill\"\n      }\n    )\n    run_list(\n      \"recipe[chef-client::delete_validation]\",\n      \"recipe[bluepill]\",\n      \"recipe[chef-client]\"\n    )\n\nThe `chef-client` recipe will create the chef-client service configured with bluepill. The bluepill \"pill\" will be located in `/etc/bluepill/chef-client.pill`. The output log will be to client.log file in the `node[\"chef_client\"][\"log_dir\"]` location, `/var/log/chef/client` by default.\n\n# Daemontools\n\nTo use daemontools, download the cookbook from the cookbook site.\n\n    knife cookbook site vendor daemontools -d\n\nChange the `init_style` to runit in the base role and add the daemontools recipe to the role's run list:\n\n    name \"base\"\n    description \"Base role applied to all nodes\"\n    override_attributes(\n      \"chef_client\" => {\n        \"init_style\" => \"daemontools\"\n      }\n    )\n    run_list(\n      \"recipe[chef-client::delete_validation]\",\n      \"recipe[daemontools]\",\n      \"recipe[chef-client]\"\n    )\n\nThe `chef-client` recipe will create the chef-cilent service configured under daemontools. It uses the same sv run scripts as the runit recipe. The run script will be located in `/etc/sv/chef-client/run`. The output log will be in the daemontools service directory, `/etc/sv/chef-client/log/main/current`.\n\nTEMPLATES\n=========\n\nchef-client.pill.erb\n--------------------\n\nBluepill configuration for the chef-client service.\n\nclient.rb.erb\n-------------\n\nConfiguration for the client, lands in `/etc/chef/client.rb`.\n\n`sv-chef-client-*run.erb`\n-------------------------\n\nRunit and Daemontools run script for chef-client service and logs.\n\nLogs will be located in the `node[\"chef_client\"][\"log_dir\"]`.\n\nLICENSE AND AUTHORS\n===================\n\n* Author: Joshua Timberman <joshua@opscode.com>\n* Copyright 2010, Opscode, Inc.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\n",
  "maintainer": "Opscode, Inc.",
  "maintainer_email": "cookbooks@opscode.com",
  "license": "Apache 2.0",
  "platforms": {
    "ubuntu": [

    ],
    "debian": [

    ],
    "redhat": [

    ],
    "centos": [

    ],
    "fedora": [

    ],
    "freebsd": [

    ],
    "openbsd": [

    ],
    "mac_os_x": [

    ]
  },
  "dependencies": {
  },
  "recommendations": {
  },
  "suggestions": {
  },
  "conflicting": {
  },
  "providing": {
  },
  "replacing": {
  },
  "attributes": {
  },
  "groupings": {
  },
  "recipes": {
    "chef-client": "Includes the service recipe by default.",
    "chef-client::config": "Configures the client.rb from a template.",
    "chef-client::service": "Sets up a client daemon to run periodically",
    "chef-client::delete_validation": "Deletes validation.pem after client registers"
  },
  "version": "0.99.2"
}